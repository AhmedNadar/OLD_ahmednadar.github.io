<!doctype html>
  <!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
  <!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
  <!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
  <!--[if gt IE 8]><!--> 
<html class="no-js" lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
<title>The joy of using TDD &#8211; Thinking Out Load</title>
<meta name="description" content="Iterating through a collection of thoughts out loud">
<meta name="keywords" content="Rails, RSpec, TDD">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ahmednadar.github.io/images/site-logo.png">
<meta name="twitter:title" content="The joy of using TDD">
<meta name="twitter:description" content="Iterating through a collection of thoughts out loud">
<meta name="twitter:creator" content="@ahmednadar">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="The joy of using TDD">
<meta property="og:description" content="Iterating through a collection of thoughts out loud">
<meta property="og:url" content="http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/">
<meta property="og:site_name" content="Thinking Out Load">





<link rel="canonical" href="http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/">
<link href="http://ahmednadar.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="Thinking Out Load Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://ahmednadar.github.io/assets/css/main.min.css">
<!-- Webfonts -->
<link href="http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic" rel="stylesheet" type="text/css">

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://ahmednadar.github.io/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://ahmednadar.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://ahmednadar.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://ahmednadar.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://ahmednadar.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://ahmednadar.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://ahmednadar.github.io/images/apple-touch-icon-144x144-precomposed.png">



  </head>
  <body id="post">
    <!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
    <nav id="dl-menu" class="dl-menuwrapper" role="navigation">
	<button class="dl-trigger">Open Menu</button>
	<ul class="dl-menu">
		<li><a href="http://ahmednadar.github.io">Home</a></li>
		<li>
			<a href="#">About</a>
			<ul class="dl-submenu">
				<li>
					<img src="http://ahmednadar.github.io/images/avatar.png" alt="Ahmed Nadar photo" class="author-photo">
					<h4>Ahmed Nadar</h4>
					<p>Web developer and designer. hobbyist cooking, gardening, photographer, and family man.</p>
				</li>
				<li><a href="http://ahmednadar.github.io/about/">Read More</a></li>
				
				<li>
					<a href="http://twitter.com/ahmednadar"><i class="icon-twitter"></i> Twitter</a>
				</li>
				
				
				
				<li>
					<a href="http://github.com/ahmednadar"><i class="icon-github"></i> GitHub</a>
				</li>
				<li>
					<a href="http://stackoverflow.com/users/66493/egyamado"><i class="icon-stackexchange"></i> Stackexchange</a>
				</li>
				
				
				
			</ul><!-- /.dl-submenu -->
		</li>
		<li>
			<a href="#">Archive</a>
			<ul class="dl-submenu">
				<li><a href="http://ahmednadar.github.io/posts/">All Posts</a></li>
				<li><a href="http://ahmednadar.github.io/tags/">All Tags</a></li>
			</ul>
		</li>
		
	</ul><!-- /.dl-menu -->
</nav><!-- /.dl-menuwrapper -->

    <div class="entry-header feature">
  <div class="entry-image">
  </div><!-- /.entry-image -->
  <div class="header-title">
    <div class="header-title-wrap">
      <h1><a href="http://ahmednadar.github.io">Thinking Out Load</a></h1>
      <h2>Iterating through a collection of thoughts out loud</h2>
    </div><!-- /.header-title-wrap -->
  </div><!-- /.header-title -->
</div><!-- /.entry-header -->
    <div id="main" role="main">
      <article class="hentry">
        <div class="entry-content">
        <header class="header-title">
          <div class="header-title-wrap">
            
              <h1 class="entry-title"><a href="http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/" rel="bookmark" title="The joy of using TDD">The joy of using TDD</a></h1>
            
            <h2>November 12, 2013</h2>
          </div><!-- /.header-title-wrap -->
        </header>
          <p>I wanted to practice RSpec more and feel that joy of TDD. So I start with simple tests aiming to cover and learn more about RSpec. During the practice I learned more about <a href="https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers">Matcher</a>, <a href="https://www.relishapp.com/rspec/rspec-expectations/v/2-5/docs/built-in-matchers/raise-error-matcher">Exceptions</a>, missing method and the thinking process of solving an issue using test first.</p>

<p>As you see below I have bunch of tests with Movie. Also I have required the movie file from <code>"../lib/movie.rb"</code></p>

<p><code>require_relative "../lib/movie.rb"</code></p>

<div class="highlight"><pre><code class="ruby"><span class="lineno">1</span> <span class="n">describe</span> <span class="no">Movie</span> <span class="k">do</span>
<span class="lineno">2</span> 	<span class="n">it</span> <span class="s2">&quot;has a name&quot;</span>
<span class="lineno">3</span> 	<span class="n">it</span> <span class="s2">&quot;has a list of casts&quot;</span>
<span class="lineno">4</span> 	<span class="n">it</span> <span class="s2">&quot;complains if there is a bad word in the name&quot;</span>
<span class="lineno">5</span> 	<span class="n">it</span> <span class="s2">&quot;is favoured if it has a celebrity in it&quot;</span>
<span class="lineno">6</span> <span class="k">end</span></code></pre></div>

<p>Although we have nothing written within our spec but we can run it and see all four tests are pending. It always good practise to run our specs to understand the whole picture of our specifications.</p>

<p>Now lets tackle each spec.</p>

<h3 id="movie-has-a-name">1- Movie has a name</h3>

<p>In order to test Movie has a name, we should first create an object of that name by creating a new instance of Movie</p>

<div class="highlight"><pre><code class="ruby"><span class="n">movie_rspec</span><span class="o">.</span><span class="n">rb</span>
<span class="n">it</span> <span class="s2">&quot;has a name&quot;</span> <span class="k">do</span>
	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span>
<span class="k">end</span></code></pre></div>

<p>When we call that new object/instance of Movie, it ‘should’ ‘respond to’ us. Luckly Rspec has a matcher for that propose <code>respond_to</code>.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">movie_rspec</span><span class="o">.</span><span class="n">rb</span>
<span class="n">it</span> <span class="s2">&quot;has a name&quot;</span> <span class="k">do</span>
	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">should</span> <span class="n">respond_to</span>
<span class="k">end</span></code></pre></div>

<p>Now we should pass a ‘symbol’ for what we are calling here which is ‘name’. </p>

<p>Because of the nature of Ruby where we able to pass a message and not method call, <code>respond_to</code> which is a rspec matcher check if the object response to a certain message.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">movie_rspec</span><span class="o">.</span><span class="n">rb</span>
<span class="n">it</span> <span class="s2">&quot;has a name&quot;</span> <span class="k">do</span>
	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">should</span> <span class="n">respond_to</span> <span class="ss">:name</span>
<span class="k">end</span></code></pre></div>

<p>Now lets run our spec which it will fail:</p>

<div class="highlight"><pre><code class="bash">» rspec --color
.F
Failures:
	1<span class="o">)</span> Movie has a name
 		Failure/Error: Movie.new.should respond_to :name
   		expected <span class="c">#&lt;Movie:0x007ffe942b9720&gt; to respond to :name</span></code></pre></div>

<p>This is error shows we have an expectation error and not a run time error.
What the error says is, it expected to respond to :name but it fails. Which means the new Movie object doesn’t not have a property/attribute of :name </p>

<p>To fix that we should declare :name as an attribute of Movie</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Movie</span>
	<span class="kp">attr_accessor</span> <span class="ss">:name</span>
<span class="k">end</span></code></pre></div>

<p>Lets make sure our code works by running our spec:</p>

<p><code>rspec --color</code></p>

<p>and yappy we passed out first test, next.</p>

<h3 id="movie-has-a-list-of-casts">2- Movie has a list of casts</h3>

<p>We are testing if the Movie object has a ‘list’ of casts.</p>

<p>We can use the same matcher <code>respond_to</code> but to be more accurate we are testing if it has a ‘list’. As we know Array contain a collection of items which is <code>kind of</code> a list. So our spec goes like this:</p>

<div class="highlight"><pre><code class="ruby"><span class="n">it</span> <span class="s2">&quot;has a list of casts&quot;</span> <span class="k">do</span>
	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">casts</span><span class="o">.</span><span class="n">should</span> <span class="n">be_kind_of</span> <span class="nb">Array</span>
<span class="k">end</span></code></pre></div>

<p>We are saying that <strong>Casts</strong> which are we testing against should be kind of an array. This would fail because we introduced a new method without defending it. Run the test and see for your self.</p>

<div class="highlight"><pre><code class="bash">» rspec --color
.F
Failures:
  1<span class="o">)</span> Movie has a list of casts
     Failure/Error: Movie.new.casts.should be_kind_of Array
     NoMethodError:
       undefined method <span class="sb">`</span>casts<span class="err">&#39;</span> <span class="k">for</span> <span class="c">#&lt;Movie:0x007fcd2ba52c88&gt;</span></code></pre></div>

<p>To fix this we should add Casts to Movie object attributes, like so:</p>

<div class="highlight"><pre><code class="ruby"><span class="k">class</span> <span class="nc">Movie</span>
		<span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:casts</span>
	<span class="k">end</span></code></pre></div>

<p>Here we added the new attribute <code>casts</code>, which is supposed to be an Array as we specified in the spec. Therefor this spec would fail.</p>

<div class="highlight"><pre><code class="bash">Failures:

1<span class="o">)</span> Movie has a list of casts
   Failure/Error: Movie.new.casts.should be_kind_of Array
     expected nil to be a kind of Array</code></pre></div>

<p>The error message is clear. It expected a nil to be kind of Array. Which means it expected the new attribute ‘casts’ to be Array but it is not. We need to return an Array, we should fix this.</p>

<p>We would create new constructor with our variables <code>name</code> and <code>casts</code>. </p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">casts</span><span class="p">)</span>
	<span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
	<span class="vi">@casts</span> <span class="o">=</span> <span class="n">casts</span>
<span class="k">end</span></code></pre></div>

<p>Doing that only would not solve our problem, because our ‘casts’ is not defined as an Array. We have 2 ways to do so:</p>

<p><strong>1- First option</strong>. Declare our variable <code>casts</code> as an empty Array to the constructor if nothing passed, <code>casts= []</code></p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">casts</span> <span class="o">=[]</span> <span class="p">)</span>
	<span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
	<span class="vi">@casts</span> <span class="o">=</span> <span class="n">casts</span>
<span class="k">end</span></code></pre></div>

<p>This would solve our current spec because we are not passing any parameter to ‘casts’, but this would cause a new error.</p>

<div class="highlight"><pre><code class="bash"><span class="lineno"> 1</span> Failures:
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> 1<span class="o">)</span> Movie has a name
<span class="lineno"> 4</span>    Failure/Error: Movie.new.should respond_to :name
<span class="lineno"> 5</span>    ArgumentError:
<span class="lineno"> 6</span>      wrong number of arguments <span class="o">(</span>0 <span class="k">for </span>1..2<span class="o">)</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> 2<span class="o">)</span> Movie has a list of casts
<span class="lineno"> 9</span>    Failure/Error: Movie.new.casts.should be_kind_of Array
<span class="lineno">10</span>    ArgumentError:
<span class="lineno">11</span>      wrong number of arguments <span class="o">(</span>0 <span class="k">for </span>1..2<span class="o">)</span></code></pre></div>

<p>This failed because we passed two parameter to the constructor but we didn’t update our spec. So we should do that:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno">1</span> <span class="n">it</span> <span class="s2">&quot;has a name&quot;</span> <span class="k">do</span>
<span class="lineno">2</span> 	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="n">respond_to</span> <span class="ss">:name</span>
<span class="lineno">3</span> <span class="k">end</span>
<span class="lineno">4</span> 
<span class="lineno">5</span> <span class="n">it</span> <span class="s2">&quot;has a list of casts&quot;</span> <span class="k">do</span>
<span class="lineno">6</span> 	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">casts</span><span class="o">.</span><span class="n">should</span> <span class="n">be_kind_of</span> <span class="nb">Array</span>
<span class="lineno">7</span> <span class="k">end</span></code></pre></div>

<p>Now our specs are passed, Hurray!</p>

<p>2- Second option, declare our list of casts as an Array when we pass it. 
Our goal here is not be able to create the Movie if we are passing a list of funny casts names.</p>

<p>We would use ‘context’ with our spec, which is short version if you would say of <code>describe</code>. We would create a variable for funny names using <code>let()</code> method which would pass a block with expression assigned to the funny name variable.</p>

<div class="highlight"><pre><code class="ruby"><span class="n">context</span> <span class="s2">&quot;given a funny list/array of casts&quot;</span> <span class="k">do</span>
<span class="n">let</span><span class="p">(</span><span class="ss">:funny_casts</span><span class="p">)</span> 
	<span class="n">it</span> <span class="s2">&quot;fails to create given a funny cast list&quot;</span> <span class="k">do</span>
		<span class="n">expect</span> <span class="p">{</span><span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some name&quot;</span><span class="p">,</span> <span class="n">funny_casts</span><span class="p">)}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span>
	<span class="k">end</span>
<span class="k">end</span></code></pre></div>

<p>As you would guess, we expect to see an error when we pass a funny cast name.</p>

<div class="highlight"><pre><code class="bash">Failures:

1<span class="o">)</span> Movie given a funny list/array of casts fails to create given a funny cast list
   Failure/Error: expect <span class="o">{</span>Movie.new<span class="o">(</span><span class="s2">&quot;Some name&quot;</span>, funny_casts<span class="o">)}</span>.to raise_error
     expected Exception but nothing was raised

Lets write code to pass our spec. We would raise an Exception unless Casts is an Array.

	def initialize<span class="o">(</span>name, <span class="nv">casts</span> <span class="o">=</span> <span class="o">[])</span>
		raise Exception unless casts.is_a? Array
		.
		.
		.
	end</code></pre></div>

<h3 id="complains-when-movie-name-has-a-bad-word">3- Complains when Movie name has a bad word</h3>
<p>Our goal is to raise an error if the Movie name include a bad name in it. </p>

<div class="highlight"><pre><code class="ruby"><span class="n">movie_rspec</span><span class="o">.</span><span class="n">rb</span>
<span class="n">it</span> <span class="s2">&quot;complains if there is a bad word in the name&quot;</span> <span class="k">do</span>
	<span class="n">expect</span> <span class="p">{</span><span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Ugly Name&quot;</span><span class="p">)}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span>
<span class="k">end</span>

<span class="no">To</span> <span class="n">make</span> <span class="n">sure</span> <span class="n">it</span> <span class="n">fails</span> <span class="n">first</span> <span class="n">we</span> <span class="n">run</span> <span class="n">the</span> <span class="nb">test</span><span class="p">,</span> <span class="ow">and</span> <span class="n">it</span> <span class="n">does</span><span class="o">.</span> <span class="no">So</span> <span class="n">lets</span> <span class="n">fix</span> <span class="n">that</span><span class="o">.</span>

<span class="n">movie</span><span class="o">.</span><span class="n">rb</span>
<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">casts</span> <span class="o">=</span> <span class="o">[]</span><span class="p">)</span>
	<span class="o">.</span>
	<span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
	<span class="vi">@casts</span> <span class="o">=</span> <span class="n">casts</span>
	<span class="k">raise</span> <span class="no">Exception</span> <span class="k">if</span> <span class="vi">@name</span> <span class="o">&amp;&amp;</span> <span class="n">has_bad_name?</span>
	<span class="o">.</span>
	<span class="o">.</span>
	<span class="o">.</span>
<span class="k">end</span></code></pre></div>

<p>Our spec would fails because it doesn’t know about our new method `has_bad_name?’
So we have to create that method which it will include list of words that are bad.</p>

<p>With our new method <code>had_bad_name?</code> we want to show an error if list of bad words such as ‘ugly’ includes downcase or uppercase <code>@name</code>.</p>

<div class="highlight"><pre><code class="ruby"><span class="k">def</span> <span class="nf">has_bad_name?</span>
	<span class="n">list_of_words</span> <span class="o">=</span> <span class="sx">%w{ugly bad lousy}</span>
	<span class="n">list_of_words</span><span class="o">.</span><span class="n">include?</span> <span class="vi">@name</span><span class="o">.</span><span class="n">downcase</span>
<span class="k">end</span></code></pre></div>

<p>When we run our test it would fails because <code>list_of_words</code> it contains all specified words as one <code>{"crappy bad lousy"}</code> instead of each one by it self <code>{"crappy", "bad", "lousy"}</code>. to fix that, we would use split method and make sure the final list of words is been subtracted from the Movie name that include bad name.</p>

<p>Run our test and it would pass.
Yeaaay we are one test away from finishing our specs.</p>

<h3 id="favour-cast-name-when-it-is-a-celebrity">4- Favour cast name when it is a celebrity</h3>
<p>We want to favour a cast name when it is a celebrity. </p>

<div class="highlight"><pre><code class="ruby"><span class="n">it</span> <span class="s2">&quot;is favoured of it has a celebrity in it&quot;</span> <span class="k">do</span>
	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some name&quot;</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;Matt Damon&quot;</span><span class="p">,</span> <span class="s2">&quot;Someone&quot;</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="n">be_favoured</span>
<span class="k">end</span></code></pre></div>

<p>Out test would fail because it doesn’t know ‘be_favoured’ method. 
We are saying here that Movie should be favoured if it has a celebrity ‘Matt Damon’. But rspec doesn’t have <code>be_favoured</code> method. When this happens ‘missing method’ comes to work. It checks if the subject of the spec has a predicate matcher or a method with last part of it match our favoured method. So let’s check if the favoured method return true for ‘Matt Demon’ like so:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="k">def</span> <span class="nf">favoured?</span>
<span class="lineno"> 2</span> 	<span class="vi">@casts</span><span class="o">.</span><span class="n">include?</span> <span class="s2">&quot;Matt Damon&quot;</span>
<span class="lineno"> 3</span> <span class="k">end</span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="no">Run</span> <span class="n">our</span> <span class="n">last</span> <span class="nb">test</span> <span class="ow">and</span> <span class="n">it</span> <span class="n">would</span> <span class="n">pass</span><span class="o">.</span>
<span class="lineno"> 6</span> <span class="err">»</span> <span class="n">rspec</span> <span class="o">--</span><span class="n">color</span>
<span class="lineno"> 7</span> 	<span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> 	<span class="no">Finished</span> <span class="k">in</span> <span class="mi">0</span><span class="o">.</span><span class="mo">007</span><span class="mi">96</span> <span class="n">seconds</span>
<span class="lineno">10</span> 	<span class="mi">5</span> <span class="n">examples</span><span class="p">,</span> <span class="mi">0</span> <span class="n">failures</span></code></pre></div>

<p>Yeaaay we have done it. We have covered a lot of aspects with Rspec. 
Lets recap:</p>

<h4 id="respondto-matcher">1- respond_to matcher</h4>
<p>We use it when we want to check if our subject response to certain message
<code>subject.should respond_to :message</code></p>

<h4 id="bekindof-matcher">2- be_kind_of matcher</h4>
<p>We use it when we want to check if our subject belongs to an Object, like inheritance.
<code>subject.should be_kind_of Object</code></p>

<h4 id="bepredicate-matcher">3- be_predicate matcher</h4>
<p>We use it when we want to check if our subject has a method that returns true or false. Using <code>missing method</code> feature in rspec this allows us to identify boolean method.
<code>subject.should be_predicate</code> and 
<code>def predicate?; end</code></p>

<h4 id="exception">4- Exception</h4>
<p>We use it when we expect an exception to be raised<br />
<code>expect {block}.to raise_error</code></p>

<p>Here are the final rspec file and our Movie class:</p>

<h3 id="a--movierspecrb">A- movie_rspec.rb</h3>
<p>Movie RSpec:</p>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="n">describe</span> <span class="no">Movie</span> <span class="k">do</span>
<span class="lineno"> 2</span> 	<span class="n">it</span> <span class="s2">&quot;has a name&quot;</span> <span class="k">do</span>
<span class="lineno"> 3</span> 		<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="n">respond_to</span> <span class="ss">:name</span>
<span class="lineno"> 4</span> 	<span class="k">end</span>
<span class="lineno"> 5</span> 	<span class="n">it</span> <span class="s2">&quot;has a list of casts&quot;</span> <span class="k">do</span>
<span class="lineno"> 6</span> 	<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some Name&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">casts</span><span class="o">.</span><span class="n">should</span> <span class="n">be_kind_of</span> <span class="nb">Array</span>
<span class="lineno"> 7</span> 	<span class="k">end</span>
<span class="lineno"> 8</span> 	<span class="n">context</span> <span class="s2">&quot;given a bad list/array of casts&quot;</span> <span class="k">do</span>
<span class="lineno"> 9</span> 		<span class="n">let</span><span class="p">(</span><span class="ss">:funny_casts</span><span class="p">)</span> 
<span class="lineno">10</span> 		<span class="n">it</span> <span class="s2">&quot;fails to create given a bad player list&quot;</span> <span class="k">do</span>
<span class="lineno">11</span> 			<span class="n">expect</span> <span class="p">{</span><span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some name&quot;</span><span class="p">,</span> <span class="n">funny_casts</span><span class="p">)}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span>
<span class="lineno">12</span> 		<span class="k">end</span>
<span class="lineno">13</span> 	<span class="k">end</span>
<span class="lineno">14</span> 	<span class="n">it</span> <span class="s2">&quot;complains if there is a bad word in the name&quot;</span> <span class="k">do</span>
<span class="lineno">15</span> 		<span class="n">expect</span> <span class="p">{</span><span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;ugly Name&quot;</span><span class="p">)}</span><span class="o">.</span><span class="n">to</span> <span class="n">raise_error</span>
<span class="lineno">16</span> 	<span class="k">end</span>
<span class="lineno">17</span> 	<span class="n">it</span> <span class="s2">&quot;is favored of it has a celebrity in it&quot;</span> <span class="k">do</span>
<span class="lineno">18</span> 		<span class="no">Movie</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Some name&quot;</span><span class="p">,</span> <span class="o">[</span><span class="s2">&quot;Matt Damon&quot;</span><span class="p">,</span> <span class="s2">&quot;Someone&quot;</span><span class="o">]</span><span class="p">)</span><span class="o">.</span><span class="n">should</span> <span class="n">be_favored</span>
<span class="lineno">19</span> 	<span class="k">end</span>
<span class="lineno">20</span> <span class="k">end</span></code></pre></div>

<h3 id="b--movierb">B- movie.rb</h3>

<div class="highlight"><pre><code class="ruby"><span class="lineno"> 1</span> <span class="k">class</span> <span class="nc">Movie</span>
<span class="lineno"> 2</span> 	<span class="kp">attr_accessor</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">:casts</span>
<span class="lineno"> 3</span> 	<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">,</span> <span class="n">casts</span> <span class="o">=</span> <span class="o">[]</span><span class="p">)</span>
<span class="lineno"> 4</span> 		<span class="k">raise</span> <span class="no">Exception</span> <span class="k">unless</span> <span class="n">casts</span><span class="o">.</span><span class="n">is_a?</span> <span class="nb">Array</span>
<span class="lineno"> 5</span> 		<span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
<span class="lineno"> 6</span> 		<span class="vi">@casts</span> <span class="o">=</span> <span class="n">casts</span>
<span class="lineno"> 7</span> 		<span class="k">raise</span> <span class="no">Exception</span> <span class="k">if</span> <span class="vi">@name</span> <span class="o">&amp;&amp;</span> <span class="n">has_bad_name?</span>
<span class="lineno"> 8</span> 	<span class="k">end</span>
<span class="lineno"> 9</span> 	<span class="k">def</span> <span class="nf">has_bad_name?</span>
<span class="lineno">10</span> 		<span class="n">list_of_words</span> <span class="o">=</span> <span class="sx">%w{ugly bad lousy}</span>
<span class="lineno">11</span> 		<span class="n">list_of_words</span> <span class="o">-</span> <span class="vi">@name</span><span class="o">.</span><span class="n">downcase</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)</span> <span class="o">!=</span> <span class="n">list_of_words</span>
<span class="lineno">12</span> 	<span class="k">end</span>
<span class="lineno">13</span> 	<span class="k">def</span> <span class="nf">favored?</span>
<span class="lineno">14</span> 		<span class="vi">@casts</span><span class="o">.</span><span class="n">include?</span> <span class="s2">&quot;Matt Damon&quot;</span>
<span class="lineno">15</span> 	<span class="k">end</span>
<span class="lineno">16</span> <span class="k">end</span></code></pre></div>

<p>Rspec is fun to use therefor; Happy Coding, eh! ;)</p>

          <footer class="entry-meta">
            <span class="entry-tags"><a href="http://ahmednadar.github.io/tags/#Rails" title="Pages tagged Rails" class="tag">Rails</a><a href="http://ahmednadar.github.io/tags/#RSpec" title="Pages tagged RSpec" class="tag">RSpec</a><a href="http://ahmednadar.github.io/tags/#TDD" title="Pages tagged TDD" class="tag">TDD</a></span>
            
            <div class="social-share">
              <ul class="socialcount socialcount-small inline-list">
                <li class="facebook"><a href="https://www.facebook.com/sharer/sharer.php?u=http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/" title="Share on Facebook"><span class="count"><i class="icon-facebook-sign"></i> Like</span></a></li>
                <li class="twitter"><a href="https://twitter.com/intent/tweet?text=http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/" title="Share on Twitter"><span class="count"><i class="icon-twitter-sign"></i> Tweet</span></a></li>
                <li class="googleplus"><a href="https://plus.google.com/share?url=http://ahmednadar.github.io/12/11/2013/the-joy-of-using-tdd/" title="Share on Google Plus"><span class="count"><i class="icon-google-plus-sign"></i> +1</span></a></li>
              </ul>
            </div><!-- /.social-share -->
          </footer>
        </div><!-- /.entry-content -->
        <section id="disqus_thread"></section><!-- /#disqus_thread -->
        
        <div class="read-more">
          
            <div class="read-more-header">
              <a href="http://ahmednadar.github.io/20/10/2013/how-to-include-bootstrap-glyphicons-to-link_to-rails/" class="read-more-btn">Read More</a>
            </div><!-- /.read-more-header -->
            <div class="read-more-content">
              <h3><a href="http://ahmednadar.github.io/20/10/2013/how-to-include-bootstrap-glyphicons-to-link_to-rails/" title="How to include Bootstrap glyphicons to 'link_to' Rails">How to include Bootstrap glyphicons to 'link_to' Rails</a></h3>
              <p>How to include Bootstrap glyphicons to link_toIdeaI”m scrapping headlines form Reddit. I was able to pull each headers’ link and content ...&hellip; <a href="http://ahmednadar.github.io/20/10/2013/how-to-include-bootstrap-glyphicons-to-link_to-rails/">Continue reading</a></p>
            </div><!-- /.read-more-content -->
          
          <div class="read-more-list">
            
              <div class="list-item">
                <h4><a href="http://ahmednadar.github.io/12/09/2013/overwrite-how-Capybara-ignores-hidden-elements/" title="Overwrite how Capybara ignores hidden elements">Overwrite how Capybara ignores hidden elements</a></h4>
                <span>Published on 12 September, 2013</span>
              </div><!-- /.list-item -->
            
              <div class="list-item">
                <h4><a href="http://ahmednadar.github.io/30/08/2013/give-me-a-ball-and-i-will-do-goodness/" title="Give Me a Ball and I Will Do Goodness">Give Me a Ball and I Will Do Goodness</a></h4>
                <span>Published on 30 August, 2013</span>
              </div><!-- /.list-item -->
            
          </div><!-- /.read-more-list -->
          
        </div><!-- /.read-more -->
      </article>
    </div><!-- /#main -->
    <div class="footer-wrapper">
      <footer role="contentinfo">
        <span>Copyright &copy; 2014 Ahmed Nadar.</span>
<div class="social-icons">
  <a href="http://twitter.com/ahmednadar" title="Ahmed Nadar on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
  <a href="http://github.com/ahmednadar" title="Ahmed Nadar on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
</div><!-- /.social-icons -->

      </footer>
    </div><!-- /.footer-wrapper -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://ahmednadar.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://ahmednadar.github.io/assets/js/scripts.min.js"></script>

<!-- Asynchronous Google Analytics snippet -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46048477-1', 'auto');  
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'disqus_ahmednadar'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        
  </body>
</html>
